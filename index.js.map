{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = \"46909038-6f1101192bb2e76c1441c4637\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst PER_PAGE = 15;  // тест кількості\n\nexport async function fetchImages(query, page = 1) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: \"true\",\n    per_page: PER_PAGE,\n    page: page,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return response.data; \n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    throw error;\n  }\n}\n","export function createImageMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <div class=\"photo-card\">\n        <a href=\"${largeImageURL}\" class=\"gallery__item\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes:</b> ${likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views:</b> ${views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments:</b> ${comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads:</b> ${downloads}\n          </p>\n        </div>\n      </div>\n    `\n    )\n    .join('');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { createImageMarkup } from \"./js/render-functions.js\"\n\n\nconst form = document.getElementById(\"search-form\");\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loader = document.getElementById(\"loader\");\nconst loadMoreButton = document.getElementById(\"load-more\");\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\nlet totalHits = 0; \nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nasync function loadImages() {\n  loader.style.display = \"block\"; \n\n  try {\n    const data = await fetchImages(query, page);\n    totalHits = data.totalHits;\n\n    if (data.hits.length === 0 && page === 1) {\n      iziToast.info({\n        title: \"Info\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n      });\n      loadMoreButton.style.display = \"none\";\n      return;\n    }\n\n    galleryContainer.insertAdjacentHTML('beforeend', createImageMarkup(data.hits));\n    lightbox.refresh();\n\n    if (galleryContainer.children.length >= totalHits) {\n      loadMoreButton.style.display = \"none\";\n      iziToast.info({\n        title: \"Info\",\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreButton.style.display = \"block\";\n    }\n\n    scrollPage();\n\n    page += 1; \n  } catch (error) {\n    iziToast.error({ title: \"Error\", message: \"Failed to fetch images. Please try again later.\" });\n  } finally {\n    loader.style.display = \"none\";\n  }\n}\n\nfunction scrollPage() {\n  const photoCard = galleryContainer.querySelector('.photo-card');\n  if (!photoCard) return; \n  const cardHeight = photoCard.getBoundingClientRect().height; \n  window.scrollBy({\n    top: cardHeight * 2, \n    behavior: 'smooth', \n  });\n}\n\nform.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n\n  query = event.target.elements.query.value.trim();\n  if (query === \"\") {\n    iziToast.warning({ title: \"Warning\", message: \"Please enter a search term.\" });\n    return;\n  }\n\n  galleryContainer.innerHTML = ''; \n  page = 1;\n  totalHits = 0;\n  loadMoreButton.style.display = \"none\";\n\n  loadImages();  \n});\n\nloadMoreButton.addEventListener(\"click\", loadImages);"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","params","axios","error","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","galleryContainer","loader","loadMoreButton","totalHits","lightbox","SimpleLightbox","loadImages","data","iziToast","scrollPage","photoCard","cardHeight","event"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAW,GAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CACjD,MAAMC,EAAS,CACb,IAAKN,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUF,EACV,KAAMG,CACV,EAEE,GAAI,CAEF,OADiB,MAAME,EAAM,IAAIN,EAAU,CAAE,OAAAK,CAAM,CAAE,GACrC,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,CCxBO,SAASC,EAAkBC,EAAQ,CACxC,OAAOA,EACJ,IACC,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAO;AAAA;AAAA,mBAEjEL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,4BAIpBC,CAAK;AAAA;AAAA;AAAA,4BAGLC,CAAK;AAAA;AAAA;AAAA,+BAGFC,CAAQ;AAAA;AAAA;AAAA,gCAGPC,CAAS;AAAA;AAAA;AAAA;AAAA,KAKpC,EACA,KAAK,EAAE,CACZ,CCjBA,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAiB,SAAS,eAAe,WAAW,EAE1D,IAAIjB,EAAQ,GACRC,EAAO,EAEPiB,EAAY,EACZC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAED,eAAeC,GAAa,CAC1BL,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMM,EAAO,MAAMvB,EAAYC,EAAOC,CAAI,EAG1C,GAFAiB,EAAYI,EAAK,UAEbA,EAAK,KAAK,SAAW,GAAKrB,IAAS,EAAG,CACxCsB,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,0EACjB,CAAO,EACDN,EAAe,MAAM,QAAU,OAC/B,MACD,CAEDF,EAAiB,mBAAmB,YAAaV,EAAkBiB,EAAK,IAAI,CAAC,EAC7EH,EAAS,QAAO,EAEZJ,EAAiB,SAAS,QAAUG,GACtCD,EAAe,MAAM,QAAU,OAC/BM,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAEDN,EAAe,MAAM,QAAU,QAGjCO,IAEAvB,GAAQ,CACT,MAAe,CACdsB,EAAS,MAAM,CAAE,MAAO,QAAS,QAAS,iDAAiD,CAAE,CACjG,QAAY,CACRP,EAAO,MAAM,QAAU,MACxB,CACH,CAEA,SAASQ,GAAa,CACpB,MAAMC,EAAYV,EAAiB,cAAc,aAAa,EAC9D,GAAI,CAACU,EAAW,OAChB,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAEAZ,EAAK,iBAAiB,SAAWa,GAAU,CAIzC,GAHAA,EAAM,eAAc,EAEpB3B,EAAQ2B,EAAM,OAAO,SAAS,MAAM,MAAM,OACtC3B,IAAU,GAAI,CAChBuB,EAAS,QAAQ,CAAE,MAAO,UAAW,QAAS,6BAA6B,CAAE,EAC7E,MACD,CAEDR,EAAiB,UAAY,GAC7Bd,EAAO,EACPiB,EAAY,EACZD,EAAe,MAAM,QAAU,OAE/BI,GACF,CAAC,EAEDJ,EAAe,iBAAiB,QAASI,CAAU"}